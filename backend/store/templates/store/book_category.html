{% extends '_base.html' %}
{% load static %}
{% load persian_translation_tags %}
{% load humanize %}


{% block title %} Book List {% endblock title %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/products.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/responsive-products.css' %}"/>
    <script defer src="{% static 'js/app.js' %}"></script>
{% endblock style %}

{% block content %}
    <main class="main">
        <section class="sort">
            <div class="container">
                <div class="sort_products">
                    <h3 class="sort_title">مرتب سازی بر اساس:</h3>
                    <ul class="sort_list">
                        <a href="?sort=newest&name={{ request.GET.name }}">
                            <li class="sort_item">جدید ترین</li>
                        </a>
                        <a href="?sort=cheapest&name={{ request.GET.name }}">
                            <li class="sort_item">ارزان ترین</li>
                        </a>
                        <a href="?sort=expensive&name={{ request.GET.name }}">
                            <li id="last-item" class="sort_item">گران ترین</li>
                        </a>
                    </ul>
                    <div class="sort_search">
                        <svg
                                aria-hidden="true"
                                data-prefix="far"
                                data-icon="search"
                                role="img"
                                viewBox="0 0 512 512"
                                class="sort-icon svg-inline--fa fa-search fa-w-16 fa-7x"
                        >
                            <path
                                    d="M508.5 468.9L387.1 347.5c-2.3-2.3-5.3-3.5-8.5-3.5h-13.2c31.5-36.5 50.6-84 50.6-136C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c52 0 99.5-19.1 136-50.6v13.2c0 3.2 1.3 6.2 3.5 8.5l121.4 121.4c4.7 4.7 12.3 4.7 17 0l22.6-22.6c4.7-4.7 4.7-12.3 0-17zM208 368c-88.4 0-160-71.6-160-160S119.6 48 208 48s160 71.6 160 160-71.6 160-160 160z"
                            ></path>
                        </svg>
                        <input
                                type="search"
                                class="sort_input"
                                placeholder="جستوجو در عناوین..."
                                maxlength="20"
                        />
                    </div>
                </div>
            </div>
        </section>

        <section class="products">
            <div class="container">
                <div class="cards">
                    {% for book in books %}
                        <div class="card">
                            <img
                                    class="card_img"
                                    src="{{ book.image.url }}"
                                    alt="product-1"
                            />
                            <div class="card_detail">
                                <h3 class="card_title">{{ book.title }} </h3>
                                <div class="card_price">
                                    <p>{{ book.price|translate_number|intcomma:False }} تومان</p>
                                    <span>
                  </span>
                                </div>
                                <div class="card_icons">
                                    <a href="{% url 'book_detail' book.id %}">
                                        <svg
                                                enable-background="new 0 0 512 512"
                                                version="1.1"
                                                viewBox="0 0 512 512"
                                                class="card_icon"
                                        >
                                            <path
                                                    d="M423.9,232.9c0-12.8-10.4-23.2-23.2-23.2h-20.1c-0.5-1.1-1-2.2-1.7-3.2l-45.8-71.3c-3.3-5.1-8.4-8.7-14.3-10    c-6-1.3-12-0.2-17.2,3.1c-10.6,6.8-13.6,20.9-6.8,31.5l32,49.8H185.3l32-49.8c2.4-3.7,3.6-7.9,3.6-12.3c0-7.8-3.9-15-10.5-19.2    c-5.1-3.3-11.2-4.4-17.2-3.1c-5.9,1.3-11,4.8-14.3,10l-45.8,71.3c-0.7,1-1.2,2.1-1.7,3.2h-20.1c-12.8,0-23.2,10.4-23.2,23.2v1.5    c0,12.8,10.4,23.2,23.2,23.2h2.2l38.1,124.3c1,3.2,3.9,5.3,7.2,5.3h194.2c3.3,0,6.2-2.2,7.2-5.3l38.1-124.3h2.2    c12.8,0,23.2-10.4,23.2-23.2V232.9z M307.3,151.8c-2.3-3.6-1.3-8.4,2.3-10.8c1.8-1.1,3.8-1.5,5.9-1.1c2,0.4,3.8,1.6,4.9,3.4    l42.6,66.3h-18.5L307.3,151.8z M191.6,143.3c1.1-1.8,2.9-3,4.9-3.4c2-0.4,4.1-0.1,5.9,1.1c2.2,1.4,3.6,3.9,3.6,6.6    c0,1.5-0.4,2.9-1.2,4.2l-37.2,57.9h-18.5L191.6,143.3z M347.6,372.2H164.4l-35.2-114.6h253.5L347.6,372.2z M408.9,234.4    c0,4.5-3.7,8.2-8.2,8.2h-7.7c0,0-0.1,0-0.1,0H119.2c0,0-0.1,0-0.1,0h-7.7c-4.5,0-8.2-3.7-8.2-8.2v-1.5c0-4.5,3.7-8.2,8.2-8.2H137    c0,0,0.1,0,0.1,0h34.4c0,0,0,0,0,0c0,0,0,0,0,0h168.8c0,0,0,0,0,0c0,0,0,0,0,0h34.4c0,0,0,0,0.1,0h25.7c4.5,0,8.2,3.7,8.2,8.2    V234.4z"
                                            />
                                            <path
                                                    d="M208.9,342.8c4.1,0,7.5-3.4,7.5-7.5v-40.8c0-4.1-3.4-7.5-7.5-7.5s-7.5,3.4-7.5,7.5v40.8    C201.4,339.5,204.8,342.8,208.9,342.8z"
                                            />
                                            <path
                                                    d="M256,342.8c4.1,0,7.5-3.4,7.5-7.5v-40.8c0-4.1-3.4-7.5-7.5-7.5s-7.5,3.4-7.5,7.5v40.8C248.5,339.5,251.9,342.8,256,342.8z    "
                                            />
                                            <path
                                                    d="M303.1,342.8c4.1,0,7.5-3.4,7.5-7.5v-40.8c0-4.1-3.4-7.5-7.5-7.5s-7.5,3.4-7.5,7.5v40.8    C295.6,339.5,298.9,342.8,303.1,342.8z"
                                            />
                                        </svg>

                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>
        <div class="container">
            <div class="pagination">
                <ul class="list_pagination">
                    {% if page_obj.has_previous %}
                        <li class="page_item">
                            <a
                                    href="?page={{ page_obj.previous_page_number }}&sort={{ request.GET.sort }}&name={{ request.GET.name }}"
                                    class="page_link disabled"
                                    aria-label="previous"
                                    onclick="changePage(currentPage-1)"
                            >
                                <span aria-hidden="true">&laquo;</span></a
                            >
                        </li>
                    {% endif %}
                    <!-- page numbers -->
                    <li class="page_item active" aria-current="page">
                        <a href="" class="page_link" onclick="changePage(1)">{{ page_obj.number }}</a>
                    </li>
                    {% if page_obj.has_next %}
                        <li class="page_item">
                            <a
                                    href="?page={{ page_obj.next_page_number }}&sort={{ request.GET.sort }}&name={{ request.GET.name}}"
                                    class="page_link"
                                    aria-label="next"
                                    onclick="changePage(currentPage+1)"
                            >
                                <span aria-hidden="true">&raquo;</span></a
                            >
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </main>
{% endblock content %}